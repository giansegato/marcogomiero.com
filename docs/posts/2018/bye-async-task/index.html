<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#494f5c">
	<meta name="msapplication-TileColor" content="#494f5c">
<meta itemprop="name" content="RSS Parser 2.0: bye bye Async Task, welcome Coroutines">
<meta itemprop="description" content="Finally, I found some time to sit down and work on my library RSS Parser. Before starting to describe all the cool stuff that I’ve introduced with this update, I want to thank you all for the support. In fact this year, the library exceeded 100 stars on Github, that seems a little goal but it means a lot to me.
I wrote this library back in 2016 and now in 2018, the code was “ugly” compared to all the coolest stuff provided by Kotlin.">


<meta itemprop="datePublished" content="2018-12-22T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-12-22T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="514">



<meta itemprop="keywords" content="" />
<meta property="og:title" content="RSS Parser 2.0: bye bye Async Task, welcome Coroutines" />
<meta property="og:description" content="Finally, I found some time to sit down and work on my library RSS Parser. Before starting to describe all the cool stuff that I’ve introduced with this update, I want to thank you all for the support. In fact this year, the library exceeded 100 stars on Github, that seems a little goal but it means a lot to me.
I wrote this library back in 2016 and now in 2018, the code was “ugly” compared to all the coolest stuff provided by Kotlin." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.marcogomiero.com/posts/2018/bye-async-task/" />
<meta property="article:published_time" content="2018-12-22T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-12-22T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="RSS Parser 2.0: bye bye Async Task, welcome Coroutines"/>
<meta name="twitter:description" content="Finally, I found some time to sit down and work on my library RSS Parser. Before starting to describe all the cool stuff that I’ve introduced with this update, I want to thank you all for the support. In fact this year, the library exceeded 100 stars on Github, that seems a little goal but it means a lot to me.
I wrote this library back in 2016 and now in 2018, the code was “ugly” compared to all the coolest stuff provided by Kotlin."/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>RSS Parser 2.0: bye bye Async Task, welcome Coroutines</title>
	<link rel="stylesheet" href="https://www.marcogomiero.com/css/style.min.2228be6b0c0388454036050b3f2743e5fd95a0dc0c3564e5623e94748b585ef1.css" integrity="sha256-Iii+awwDiEVANgULPydD5f2VoNwMNWTlYj6UdItYXvE=">
	
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp faster">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://www.marcogomiero.com">Marco Gomiero</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					
				<a href="https://www.marcogomiero.com/posts/">Blog</a>
				<a href="https://www.marcogomiero.com/talks/">Talks</a>
				<a href="https://www.marcogomiero.com/projects/">Projects</a>
				<a href="https://www.marcogomiero.com/about-me/">About</a>

				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<span class="hdr-social hide-in-mobile"><a href="https://twitter.com/marcoGomier" target="_blank" rel="noopener me" title="Twitter"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a><a href="https://www.linkedin.com/in/marco-gomiero-a80857ab/" target="_blank" rel="noopener me" title="Linkedin"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg></a><a href="https://github.com/prof18" target="_blank" rel="noopener me" title="Github"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></span><button id="menu-btn" class="hdr-btn" title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
		<script async defer src="https://buttons.github.io/buttons.js"></script>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://www.marcogomiero.com/posts/">Blog</a></li>
			<li><a href="https://www.marcogomiero.com/talks/">Talks</a></li>
			<li><a href="https://www.marcogomiero.com/projects/">Projects</a></li>
			<li><a href="https://www.marcogomiero.com/about-me/">About</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta"><span>Dec 22, 2018</span></div>
				<h1>RSS Parser 2.0: bye bye Async Task, welcome Coroutines</h1>
			</header>
			<div class="content">
				<p>Finally, I found some time to sit down and work on my library RSS Parser. Before starting to describe all the cool stuff that I’ve introduced with this update, I want to thank you all for the support. In fact this year, the library exceeded 100 stars on Github, that seems a little goal but it means a lot to me.</p>

<p>I wrote this library back in 2016 and now in 2018, the code was “ugly” compared to all the coolest stuff provided by Kotlin.</p>

<p><img src="https://cdn-images-1.medium.com/max/2000/1*T__9s7dfREGnF13oRlBhDg.jpeg" alt="" /></p>

<p>So I decided to rewrite the library using <strong>Kotlin</strong> and <strong>Coroutines</strong>, so I can (finally) get rid of <strong>Async Task</strong>.</p>

<p><img src="https://cdn-images-1.medium.com/max/2000/1*87C2QK8usMRMZ-hpdrqKKA.jpeg" alt="" /></p>

<p>Of course, I maintained the compatibility of the library for the projects that still use Java.</p>

<p>Shortly, the library allows to parse an RSS feed and retrieve some information like title, content, author, etc. You can found more information about the features of the library in the <a href="http://www.marcogomiero.com/posts/rss-parser-library/">blog post</a> that I’ve published some time ago or in the <a href="https://github.com/prof18/RSS-Parser">README</a> available on Github.</p>

<p>But now let’s see some code. In this article, I’ll show only how to use the library because I’m planning to publish another blog post with all the technical details and decisions that I have made during the development of this new version.</p>

<p>The usage is very simple both if you are using Java or Kotlin.
If you are using <strong>Kotlin</strong>, you need to create a <em>Parser</em> object and then call the suspend method <em>getArticles</em> passing the <em>URL</em> of the RSS feed as parameter. Since this is a <em>suspend</em> function, you need to “<a href="https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/launch.html"><em>launch</em></a>” the coroutine. Of course, you need also to handle the error case.</p>

<p>Here is an example:</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nf">com</span><span class="p">.</span><span class="na">prof</span><span class="p">.</span><span class="na">rssparser</span><span class="p">.</span><span class="na">Article</span>
<span class="kn">import</span> <span class="nf">com</span><span class="p">.</span><span class="na">prof</span><span class="p">.</span><span class="na">rssparser</span><span class="p">.</span><span class="na">Parser</span>

<span class="c1">//url of RSS feed
</span><span class="c1"></span><span class="kd">private</span> <span class="nf">val</span> <span class="n">url</span> <span class="o">=</span> <span class="s">&#34;[https://www.androidauthority.com/feed](https://www.androidauthority.com/feed)&#34;</span>

<span class="n">coroutineScope</span><span class="p">.</span><span class="na">launch</span><span class="p">(</span><span class="n">Dispatchers</span><span class="p">.</span><span class="na">Main</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="n">val</span> <span class="nf">parser</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">()</span>
        <span class="n">val</span> <span class="nf">articleList</span> <span class="o">=</span> <span class="n">parser</span><span class="p">.</span><span class="na">getArticles</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="c1">// The list contains all article&#39;s data. For example you can use it for your adapter.
</span><span class="c1"></span>    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">e</span><span class="o">:</span> <span class="n">Exception</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Handle the exception
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>A complete example with Kotlin is available on <a href="https://github.com/prof18/RSS-Parser/tree/master/samplekotlin">Github</a>.</p>

<p>If you don’t know anything about the coroutines, I suggest you give a look to the <a href="https://codelabs.developers.google.com/codelabs/kotlin-coroutines/">Codelab</a> provided by Google.</p>

<p>Instead, if you are still using <strong>Java</strong> in your Android project, the usage is pretty the same as the older version of the library. You need to create a <em>Parser</em> object, implements the callbacks that handle the result and the error and finally start the parsing by calling the <em>execute</em> method passing the <em>URL</em> as parameter.</p>

<p>Here is an example:</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nf">com</span><span class="p">.</span><span class="na">prof</span><span class="p">.</span><span class="na">rssparser</span><span class="p">.</span><span class="na">Article</span><span class="p">;</span>
<span class="kn">import</span> <span class="nf">com</span><span class="p">.</span><span class="na">prof</span><span class="p">.</span><span class="na">rssparser</span><span class="p">.</span><span class="na">OnTaskCompleted</span><span class="p">;</span>
<span class="kn">import</span> <span class="nf">com</span><span class="p">.</span><span class="na">prof</span><span class="p">.</span><span class="na">rssparser</span><span class="p">.</span><span class="na">Parser</span><span class="p">;</span>

<span class="n">Parser</span> <span class="nf">parser</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Parser</span><span class="p">();</span>
<span class="n">parser</span><span class="p">.</span><span class="na">onFinish</span><span class="p">(</span><span class="k">new</span> <span class="n">OnTaskCompleted</span><span class="p">()</span> <span class="p">{</span>

    <span class="c1">//what to do when the parsing is done
</span><span class="c1"></span>    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nf">void</span> <span class="n">onTaskCompleted</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Article</span><span class="o">&gt;</span> <span class="nf">list</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// The list contains all article&#39;s data. For example you can use it for your adapter.
</span><span class="c1"></span>    <span class="p">}</span>

    <span class="c1">//what to do in case of error
</span><span class="c1"></span>    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nf">void</span> <span class="n">onError</span><span class="p">(</span><span class="n">Exception</span> <span class="nf">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Handle the exception
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">});</span>
<span class="n">parser</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">urlString</span><span class="p">);</span></code></pre></div>
<p>A complete example in Java is also available on <a href="https://github.com/prof18/RSS-Parser/tree/master/samplejava">Github</a>.</p>

<p>That’s all! For all the details or to report a bug, please visit the repo on <a href="https://github.com/prof18/RSS-Parser">Github</a>.</p>

<hr />

<p><em>Published also on <a href="https://medium.com/@marcogomiero/rss-parser-2-0-bye-bye-async-task-welcome-coroutines-6002c9de5145">Medium</a></em></p>

			</div>

			<hr class="post-end">
			<footer class="post-info">
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>514 Words</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2018-12-22 01:00 &#43;0100</p>
			</footer>
		</article>
		<div class="post-nav thin">
			<a class="next-post" href="https://www.marcogomiero.com/posts/2019/asynctask-to-coroutines/">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;Newer</span><br><span>A journey from Async Task to Kotlin Coroutines</span>
			</a>
			<a class="prev-post" href="https://www.marcogomiero.com/posts/2018/image-update-rss-lib/">
				<span class="post-nav-label">Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><br><span>New update for RSS Parser: featured image</span>
			</a>
		</div>
		<div id="comments" class="thin">
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "marcogomiero" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2019 <a href="https://www.marcogomiero.com">Marco Gomiero</a></p>
		<p>
			Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a> &#183; <a href="https://www.marcogomiero.com/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>


	<script src="https://www.marcogomiero.com/js/main.min.35ccbf1cdceb91e4c64c06b5d009d6e2977fafe56beda7762febd4e67528d2ac.js" integrity="sha256-Ncy/HNzrkeTGTAa10AnW4pd/r+Vr7ad2L+vU5nUo0qw="></script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-90975904-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


</body>

</html>
